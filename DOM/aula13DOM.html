<!doctype html>
<html lang ="pt-br">
    <head>
        <title> Exercício Lista</title>
        <meta charset="utf-8">
        <meta name="author" content="Laís Tavares">
        <meta name="description" content="modelo base">
        <meta name="keyworlds" content="html, base, tecnologia, udemy">

    </head>
   
    <style>
        .done{
            text-decoration: line-through;
            color: #555;
        }
    </style>

    <body>
        <div class="container">
            <h1>Aula 13 - DOM - JavaScript</h1>

            <input type="text" id="txtTask">
            <button id="btn">Cadastrar Tarefa</button>
            <p>Clique uma vez para riscar.</p>
            <p>Clique duas vezes para excluir a tarefa da lista.</p>
            <ul>
                <li>HTML - Básico ao Avançado</li>
                <li>CSS - Básico ao Intermediário</li>
                <li>JS - Básico</li>
            </ul>

        </div>


        <script>
            (function(){
               'use strict';

                var $ul = document.querySelector('ul');
                var $lis = $ul.querySelectorAll('li');
                var $txtTask = document.querySelector('#txtTask');
                var $btn = document.querySelector('#btn');

                $btn.addEventListener('click', addTask);
                $txtTask.addEventListener('keyup', function(e){
                    if(e.keyCode === 13){
                        addTask();
                    }
                });

                $ul.addEventListener('click', function(e){
                    if(e.target.nodeName === 'LI'){
                        toggleDone(e.target);

                    }
                })
                
                $ul.addEventListener('dblclick', function(e){
                    if(e.target.nodeName === 'LI'){
                        removeTask(e.target)
                    }
                })

                function toggleDone(li){
                    li.classList.toggle('done');
                }

                function removeTask(li){
                    if(confirm('Deseja realmente excluir a tarefa \n '+ li.textContent + '?')){
                        console.log(li.parentNode);
                        li.parentNode.removeChild(li);
                    }
                }

                function addTask(){

                    var li = document.createElement('li');
                    var text = document.createTextNode($txtTask.value);

                   li.appendChild(text);

                   $ul.appendChild(li);
                   
                    $txtTask = '';
                    $txtTask.focus();
                    
                }

            })()
        </script>
    </body>
</html>